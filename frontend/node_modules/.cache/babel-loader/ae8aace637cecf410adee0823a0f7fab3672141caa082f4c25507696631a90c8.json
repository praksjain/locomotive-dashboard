{"ast":null,"code":"import { updateSimulation } from '../store/simulationSlice';\nexport class WebSocketService {\n  constructor(dispatch) {\n    this.ws = null;\n    this.dispatch = void 0;\n    this.dispatch = dispatch;\n  }\n  connect() {\n    this.ws = new WebSocket('ws://localhost:8000/ws');\n    this.ws.onmessage = event => {\n      const data = JSON.parse(event.data);\n      this.dispatch(updateSimulation(data));\n    };\n    this.ws.onclose = () => {\n      setTimeout(() => this.connect(), 1000);\n    };\n  }\n  sendUpdate(data) {\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify(data));\n    }\n  }\n}","map":{"version":3,"names":["updateSimulation","WebSocketService","constructor","dispatch","ws","connect","WebSocket","onmessage","event","data","JSON","parse","onclose","setTimeout","sendUpdate","readyState","OPEN","send","stringify"],"sources":["/Users/apple/Documents/Prakhar/Projects/locomotive-simulator/frontend/src/services/WebSocketService.ts"],"sourcesContent":["import { AppDispatch } from '../store';\nimport { updateSimulation } from '../store/simulationSlice';\n\nexport class WebSocketService {\n  private ws: WebSocket | null = null;\n  private dispatch: any;\n\n  constructor(dispatch: any) {\n    this.dispatch = dispatch;\n  }\n\n  connect() {\n    this.ws = new WebSocket('ws://localhost:8000/ws');\n    \n    this.ws.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      this.dispatch(updateSimulation(data));\n    };\n\n    this.ws.onclose = () => {\n      setTimeout(() => this.connect(), 1000);\n    };\n  }\n\n  sendUpdate(data: any) {\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify(data));\n    }\n  }\n} "],"mappings":"AACA,SAASA,gBAAgB,QAAQ,0BAA0B;AAE3D,OAAO,MAAMC,gBAAgB,CAAC;EAI5BC,WAAWA,CAACC,QAAa,EAAE;IAAA,KAHnBC,EAAE,GAAqB,IAAI;IAAA,KAC3BD,QAAQ;IAGd,IAAI,CAACA,QAAQ,GAAGA,QAAQ;EAC1B;EAEAE,OAAOA,CAAA,EAAG;IACR,IAAI,CAACD,EAAE,GAAG,IAAIE,SAAS,CAAC,wBAAwB,CAAC;IAEjD,IAAI,CAACF,EAAE,CAACG,SAAS,GAAIC,KAAK,IAAK;MAC7B,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACC,IAAI,CAAC;MACnC,IAAI,CAACN,QAAQ,CAACH,gBAAgB,CAACS,IAAI,CAAC,CAAC;IACvC,CAAC;IAED,IAAI,CAACL,EAAE,CAACQ,OAAO,GAAG,MAAM;MACtBC,UAAU,CAAC,MAAM,IAAI,CAACR,OAAO,CAAC,CAAC,EAAE,IAAI,CAAC;IACxC,CAAC;EACH;EAEAS,UAAUA,CAACL,IAAS,EAAE;IACpB,IAAI,IAAI,CAACL,EAAE,IAAI,IAAI,CAACA,EAAE,CAACW,UAAU,KAAKT,SAAS,CAACU,IAAI,EAAE;MACpD,IAAI,CAACZ,EAAE,CAACa,IAAI,CAACP,IAAI,CAACQ,SAAS,CAACT,IAAI,CAAC,CAAC;IACpC;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}